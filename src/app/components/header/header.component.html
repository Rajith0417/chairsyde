<div class="relative flex justify-end md:justify-between h-16 px-4 py-3 border-b-1 border-gray-300"
  (clickOutside)="closeDropdown()">
  <!-- Dropdown Button -->
  <button (click)="toggleDropdown()"
    class="w-54 md:w-full bg-white px-4 py-2 flex flex-row gap-2 items-center text-base" aria-haspopup="listbox"
    [attr.aria-expanded]="isOpen ? 'true' : 'false'" aria-label="User menu" aria-controls="user-menu" role="combobox"
    id="menu-button" #userMenuButton>
    <span class="text-gray-900">{{
      selectedItem?.name || "Select a User"
      }}</span>
    <span class="text-gray-500 text-base">
      @if(isOpen){
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-5" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
      </svg>

      } @else {
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-5" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
      </svg>

      }
    </span>
  </button>

  <!-- Dropdown Menu -->
  @if(isOpen){
  <div class="absolute w-60 bg-white border border-gray-300 rounded-md shadow-lg overflow-hidden mt-12">
    <ul class="text-base" id="user-menu" role="listbox" aria-label="User selection menu" aria-labelledby="menu-button"
      [attr.aria-expanded]="isOpen ? 'true' : 'false'" tabindex="{{ isOpen ? '0' : '-1' }}" #userListBox>
      @for (item of items; track $index) {
      <li (click)="selectItem(item)" (keydown.enter)="selectItem(item)" (keydown.space)="selectItem(item)"
        class="flex justify-between px-4 py-2 hover:bg-gray-100 cursor-pointer" role="option" tabindex="0"
        [attr.aria-selected]="item === selectedItem ? 'true' : 'false'">
        <span>{{ item.name }}</span>
        <span class="text-gray-500">{{ item.time }}</span>
      </li>
      }
    </ul>
  </div>
  }
  <button
    class="px-4 py-2 border-1 border-gray-300 rounded-lg flex items-center gap-2 whitespace-nowrap hover:bg-teal-100 cursor-pointer"
    aria-label="Create new note">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
      class="size-6" aria-hidden="ture">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
    </svg>
    <span>New Notes</span>
  </button>
</div>
